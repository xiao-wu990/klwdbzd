<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‚¸å¼¹èº²é¿å¤§å†’é™©</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FF5722;
            --secondary: #4CAF50;
            --accent: #FFC107;
            --dark: #212121;
            --light: #F5F5F5;
            --danger: #F44336;
            --success: #8BC34A;
            --info: #2196F3;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* ç™»å½•/æ³¨å†Œç•Œé¢ */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: rgba(0, 0, 0, 0.7);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        
        .auth-form {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.5s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .auth-form h2 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--accent);
            font-family: 'Press Start 2P', cursive;
            font-size: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.2rem;
            position: relative;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }
        
        .form-group input {
            width: 100%;
            padding: 0.8rem;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3);
        }
        
        .remember-me {
            display: flex;
            align-items: center;
            margin: 1rem 0;
        }
        
        .remember-me input {
            margin-right: 0.5rem;
        }
        
        .auth-btn {
            width: 100%;
            padding: 0.8rem;
            border: none;
            border-radius: 8px;
            background: var(--secondary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin-top: 0.5rem;
            transition: all 0.3s;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .auth-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .auth-btn:active {
            transform: translateY(0);
        }
        
        .switch-auth {
            text-align: center;
            margin-top: 1.5rem;
            cursor: pointer;
            color: var(--accent);
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .switch-auth:hover {
            color: #FFD700;
            text-decoration: underline;
        }
        
        /* ä¸»ç•Œé¢ */
        .main-container {
            display: none;
            padding: 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 1rem;
            object-fit: cover;
            border: 2px solid var(--accent);
            transition: all 0.3s;
        }
        
        .avatar:hover {
            transform: rotate(15deg);
        }
        
        .user-details h3 {
            margin-bottom: 0.2rem;
            font-size: 1.2rem;
            color: white;
        }
        
        .user-details p {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .vip-badge {
            background: linear-gradient(90deg, #FFD700, #FFA500);
            color: #000;
            padding: 0.2rem 0.5rem;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: bold;
            display: inline-block;
            margin-left: 0.5rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .user-stats {
            display: flex;
            gap: 1.5rem;
        }
        
        .stat {
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s;
        }
        
        .stat:hover {
            background: rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
        }
        
        .stat-icon {
            margin-right: 0.5rem;
            font-size: 1.2rem;
        }
        
        .stat-value {
            font-weight: bold;
            font-size: 1rem;
        }
        
        /* æ¸¸æˆèœå• */
        .game-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .menu-btn {
            padding: 1rem;
            border: none;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .menu-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .menu-btn:active {
            transform: translateY(0);
        }
        
        .menu-btn i {
            margin-right: 0.5rem;
            font-size: 1.2rem;
        }
        
        /* æ¸¸æˆåŒºåŸŸ */
        .game-container {
            display: none;
            position: relative;
            width: 100%;
            height: 70vh;
            max-height: 600px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        #game-canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .player {
            position: absolute;
            width: 40px;
            height: 40px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%234CAF50"/><circle cx="35" cy="40" r="5" fill="white"/><circle cx="65" cy="40" r="5" fill="white"/><path d="M30,65 Q50,80 70,65" stroke="white" stroke-width="3" fill="none"/></svg>') no-repeat center center;
            background-size: contain;
            z-index: 10;
            transition: transform 0.2s;
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.7));
        }
        
        .player:hover {
            transform: scale(1.1);
        }
        
        /* çˆ†ç‚¸æ•ˆæœ */
        .explosion {
            position: absolute;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, rgba(255,100,100,0.8) 0%, rgba(255,50,50,0.6) 50%, rgba(255,0,0,0) 100%);
            border-radius: 50%;
            pointer-events: none;
            animation: explode 0.5s forwards;
            z-index: 15;
        }
        
        @keyframes explode {
            0% { transform: scale(0.5); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }
        
        /* æ”¶é›†æ•ˆæœ */
        .collect-effect {
            position: absolute;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 100%);
            border-radius: 50%;
            pointer-events: none;
            animation: collect 0.5s forwards;
            z-index: 15;
        }
        
        @keyframes collect {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }
        
        /* æ§åˆ¶æŒ‰é’® - ç§»åŠ¨ç«¯ */
        .controls {
            display: none;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 10px;
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 70px;
            height: 70px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.2s;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .control-btn:active {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(0.95);
        }
        
        .up-btn {
            grid-column: 2;
            grid-row: 1;
        }
        
        .left-btn {
            grid-column: 1;
            grid-row: 2;
        }
        
        .right-btn {
            grid-column: 3;
            grid-row: 2;
        }
        
        .down-btn {
            grid-column: 2;
            grid-row: 3;
        }
        
        /* å•†åº—å’Œè®¾ç½® */
        .shop-container, .settings-container, .leaderboard-container {
            display: none;
            background: rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            border-radius: 15px;
            margin-top: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeIn 0.5s ease;
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 1.5rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 0.5rem;
        }
        
        .tab {
            padding: 0.7rem 1.5rem;
            background: transparent;
            margin-right: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .tab.active {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .tab:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .shop-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1.5rem;
        }
        
        .shop-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .shop-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .shop-item img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 0.8rem;
            border: 2px solid var(--accent);
            filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.5));
        }
        
        .shop-item h3 {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            color: white;
        }
        
        .shop-item .price {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            color: var(--accent);
        }
        
        .shop-item .price i {
            margin-right: 0.3rem;
        }
        
        .shop-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .shop-item.disabled:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .shop-item.owned {
            border: 2px solid var(--success);
        }
        
        .shop-item.equipped {
            border: 2px solid var(--accent);
            box-shadow: 0 0 10px var(--accent);
        }
        
        /* VIPé€‰é¡¹ */
        .vip-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .vip-option {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .vip-option:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .vip-option h3 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--accent);
        }
        
        .vip-option .price {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: var(--accent);
        }
        
        .vip-option .benefits {
            text-align: left;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }
        
        .vip-option .benefits li {
            margin-bottom: 0.5rem;
            list-style-type: none;
            position: relative;
            padding-left: 1.5rem;
        }
        
        .vip-option .benefits li:before {
            content: "âœ“";
            color: var(--success);
            position: absolute;
            left: 0;
        }
        
        .buy-btn {
            padding: 0.8rem 1.5rem;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        
        .buy-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        
        .buy-btn:active {
            transform: translateY(0);
        }
        
        /* è®¾ç½® */
        .setting-option {
            margin-bottom: 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 10px;
        }
        
        .setting-option label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }
        
        .setting-option input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            outline: none;
        }
        
        .setting-option input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
        }
        
        .setting-option input[type="text"] {
            width: 100%;
            padding: 0.8rem;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            margin-bottom: 0.8rem;
        }
        
        .setting-option button {
            padding: 0.6rem 1.2rem;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .setting-option button:hover {
            background: #45a049;
        }
        
        /* æ’è¡Œæ¦œ */
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .leaderboard-table th {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            text-align: left;
        }
        
        .leaderboard-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .leaderboard-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .leaderboard-table .rank {
            font-weight: bold;
            color: var(--accent);
        }
        
        .leaderboard-table .me {
            background: rgba(76, 175, 80, 0.2);
            font-weight: bold;
        }
        
        /* æ¸¸æˆç»“æŸå’Œé«˜åˆ†ç•Œé¢ */
        .game-over-container, .high-score-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }
        
        .game-over-content, .high-score-content {
            background: rgba(0, 0, 0, 0.7);
            padding: 2.5rem;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            border: 2px solid var(--accent);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .game-over-content h2, .high-score-content h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--accent);
            font-family: 'Press Start 2P', cursive;
        }
        
        .game-over-content p, .high-score-content p {
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }
        
        .score-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
            margin: 0.5rem 0;
        }
        
        .restart-btn {
            padding: 1rem 2.5rem;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 1.5rem;
            transition: all 0.3s;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .restart-btn:hover {
            background: #45a049;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .restart-btn:active {
            transform: translateY(0);
        }
        
        /* ç®¡ç†å‘˜é¢æ¿ */
        .admin-panel {
            display: none;
            background: rgba(255, 0, 0, 0.1);
            padding: 1.5rem;
            border-radius: 15px;
            margin-top: 1.5rem;
            border: 1px solid rgba(255, 0, 0, 0.2);
        }
        
        .admin-panel h2 {
            color: var(--danger);
            margin-bottom: 1.5rem;
            font-family: 'Press Start 2P', cursive;
            font-size: 1.2rem;
        }
        
        .admin-search {
            display: flex;
            margin-bottom: 1.5rem;
        }
        
        .admin-search input {
            flex: 1;
            padding: 0.8rem;
            border: none;
            border-radius: 8px 0 0 8px;
            background: rgba(255, 255, 255, 0.9);
        }
        
        .admin-search button {
            padding: 0.8rem 1.5rem;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 0 8px 8px 0;
            font-weight: bold;
            cursor: pointer;
        }
        
        .user-details-admin {
            background: rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
        }
        
        .user-details-admin h3 {
            margin-bottom: 1rem;
            color: var(--accent);
        }
        
        .user-details-admin p {
            margin-bottom: 0.5rem;
        }
        
        .admin-actions {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .admin-btn {
            padding: 0.8rem;
            background: var(--danger);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .admin-btn:hover {
            background: #d32f2f;
            transform: translateY(-2px);
        }
        
        .admin-btn:active {
            transform: translateY(0);
        }
        
        .admin-stats {
            margin-top: 1.5rem;
            background: rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            border-radius: 10px;
        }
        
        .admin-stats h3 {
            margin-bottom: 1rem;
            color: var(--accent);
        }
        
        /* å¼€å‘è€…æ¨¡å¼ */
        .dev-mode {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1001;
        }
        
        #dev-mode-btn {
            padding: 0.8rem 1.5rem;
            background: var(--dark);
            color: white;
            border: none;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            display: none; /* éšè—å¼€å‘è€…æŒ‰é’® */
        }
        
        /* é€šçŸ¥ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 8px;
            z-index: 1001;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transform: translateX(200%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification i {
            margin-right: 0.5rem;
            font-size: 1.2rem;
        }
        
        .notification.success {
            border-left: 4px solid var(--success);
        }
        
        .notification.error {
            border-left: 4px solid var(--danger);
        }
        
        .notification.warning {
            border-left: 4px solid var(--accent);
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .user-stats {
                width: 100%;
                margin-top: 1rem;
                justify-content: space-between;
            }
            
            .controls {
                display: grid;
            }
            
            .game-menu {
                grid-template-columns: 1fr;
            }
            
            .shop-items {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
            
            .vip-options {
                grid-template-columns: 1fr;
            }
            
            .admin-actions {
                grid-template-columns: 1fr;
            }
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        
        /* å·¥å…·æç¤º */
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 0.5rem;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- ç™»å½•/æ³¨å†Œç•Œé¢ -->
    <div class="auth-container" id="auth-container">
        <div class="auth-form" id="login-form">
            <h2>ç™»å½•</h2>
            <div class="form-group">
                <label for="login-username">ç”¨æˆ·å</label>
                <input type="text" id="login-username" placeholder="è¾“å…¥ç”¨æˆ·å">
            </div>
            <div class="form-group">
                <label for="login-password">å¯†ç </label>
                <input type="password" id="login-password" placeholder="è¾“å…¥å¯†ç ">
            </div>
            <div class="remember-me">
                <input type="checkbox" id="remember-me">
                <label for="remember-me">30å¤©å†…è‡ªåŠ¨ç™»å½•</label>
            </div>
            <button class="auth-btn" id="login-btn">
                <i class="fas fa-sign-in-alt"></i> ç™»å½•
            </button>
            <p class="switch-auth" id="switch-to-register">
                <i class="fas fa-user-plus"></i> æ²¡æœ‰è´¦å·ï¼Ÿç«‹å³æ³¨å†Œ
            </p>
        </div>
        
        <div class="auth-form" id="register-form" style="display: none;">
            <h2>æ³¨å†Œ</h2>
            <div class="form-group">
                <label for="register-username">ç”¨æˆ·å</label>
                <input type="text" id="register-username" placeholder="è¾“å…¥ç”¨æˆ·å">
            </div>
            <div class="form-group">
                <label for="register-password">å¯†ç </label>
                <input type="password" id="register-password" placeholder="è¾“å…¥å¯†ç ">
            </div>
            <div class="form-group">
                <label for="register-confirm-password">ç¡®è®¤å¯†ç </label>
                <input type="password" id="register-confirm-password" placeholder="å†æ¬¡è¾“å…¥å¯†ç ">
            </div>
            <button class="auth-btn" id="register-btn">
                <i class="fas fa-user-plus"></i> æ³¨å†Œ
            </button>
            <p class="switch-auth" id="switch-to-login">
                <i class="fas fa-sign-in-alt"></i> å·²æœ‰è´¦å·ï¼Ÿç«‹å³ç™»å½•
            </p>
        </div>
    </div>
    
    <!-- ä¸»ç•Œé¢ -->
    <div class="main-container" id="main-container">
        <div class="header">
            <div class="user-info">
                <img src="https://via.placeholder.com/50" alt="å¤´åƒ" class="avatar" id="user-avatar">
                <div class="user-details">
                    <h3 id="username-display">ç”¨æˆ·å</h3>
                    <p id="user-vip-status">æ™®é€šç”¨æˆ·</p>
                </div>
            </div>
            <div class="user-stats">
                <div class="stat tooltip">
                    <span class="stat-icon">ğŸ’°</span>
                    <span class="stat-value" id="coins-display">0</span>
                    <span class="tooltiptext">é‡‘å¸</span>
                </div>
                <div class="stat tooltip">
                    <span class="stat-icon">ğŸ”‘</span>
                    <span class="stat-value" id="keys-display">0</span>
                    <span class="tooltiptext">é’¥åŒ™</span>
                </div>
                <div class="stat tooltip">
                    <span class="stat-icon">â¤ï¸</span>
                    <span class="stat-value" id="lives-display">1</span>
                    <span class="tooltiptext">ç”Ÿå‘½</span>
                </div>
            </div>
        </div>
        
        <div class="game-menu">
            <button class="menu-btn" id="play-btn">
                <i class="fas fa-gamepad"></i> å¼€å§‹æ¸¸æˆ
            </button>
            <button class="menu-btn" id="shop-btn">
                <i class="fas fa-shopping-cart"></i> å•†åº—
            </button>
            <button class="menu-btn" id="settings-btn">
                <i class="fas fa-cog"></i> è®¾ç½®
            </button>
            <button class="menu-btn" id="leaderboard-btn">
                <i class="fas fa-trophy"></i> æ’è¡Œæ¦œ
            </button>
            <button class="menu-btn" id="switch-account-btn">
                <i class="fas fa-exchange-alt"></i> åˆ‡æ¢è´¦å·
            </button>
            <button class="menu-btn" id="contact-btn">
                <i class="fas fa-envelope"></i> è”ç³»å¼€å‘è€…
            </button>
            <button class="menu-btn" id="qq-group-btn">
                <i class="fab fa-qq"></i> åŠ å…¥QQç¾¤
            </button>
        </div>
        
        <!-- æ¸¸æˆåŒºåŸŸ -->
        <div class="game-container" id="game-container">
            <canvas id="game-canvas"></canvas>
            <div class="player" id="player"></div>
        </div>
        
        <!-- ç§»åŠ¨ç«¯æ§åˆ¶æŒ‰é’® -->
        <div class="controls" id="controls">
            <button class="control-btn up-btn" id="up-btn">â†‘</button>
            <button class="control-btn left-btn" id="left-btn">â†</button>
            <button class="control-btn right-btn" id="right-btn">â†’</button>
            <button class="control-btn down-btn" id="down-btn">â†“</button>
        </div>
        
        <!-- å•†åº— -->
        <div class="shop-container" id="shop-container">
            <h2><i class="fas fa-shopping-cart"></i> å•†åº—</h2>
            <div class="tab-container">
                <div class="tab active" data-tab="skins">çš®è‚¤</div>
                <div class="tab" data-tab="avatars">å¤´åƒ</div>
                <div class="tab" data-tab="vip">VIP</div>
            </div>
            
            <div class="shop-content" id="skins-tab">
                <div class="shop-items" id="skins-items">
                    <!-- çš®è‚¤é¡¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            
            <div class="shop-content" id="avatars-tab" style="display: none;">
                <div class="shop-items" id="avatars-items">
                    <!-- å¤´åƒé¡¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            
            <div class="shop-content" id="vip-tab" style="display: none;">
                <div class="vip-options">
                    <div class="vip-option">
                        <h3>VIPæœˆå¡</h3>
                        <div class="price">200 <i class="fas fa-coins"></i></div>
                        <ul class="benefits">
                            <li>ä¸“å±VIPæ ‡å¿—</li>
                            <li>æ¯æ—¥é¢†å–50é‡‘å¸</li>
                            <li>è§£é”æ‰€æœ‰æ™®é€šçš®è‚¤</li>
                            <li>æ¸¸æˆå†…ç‰¹æ®Šæ•ˆæœ</li>
                        </ul>
                        <button class="buy-btn" data-item="vip-month">è´­ä¹°</button>
                    </div>
                    <div class="vip-option">
                        <h3>VIPå¹´å¡</h3>
                        <div class="price">1000 <i class="fas fa-coins"></i></div>
                        <ul class="benefits">
                            <li>åŒ…å«æœˆå¡æ‰€æœ‰ç‰¹æƒ</li>
                            <li>ä¸“å±VIPå¤´åƒæ¡†</li>
                            <li>æ¯æ—¥é¢†å–100é‡‘å¸</li>
                            <li>è§£é”æ‰€æœ‰ç¨€æœ‰çš®è‚¤</li>
                            <li>æ¸¸æˆå†…ç‰¹æ®Šç‰¹æ•ˆ</li>
                        </ul>
                        <button class="buy-btn" data-item="vip-year">è´­ä¹°</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- è®¾ç½® -->
        <div class="settings-container" id="settings-container">
            <h2><i class="fas fa-cog"></i> è®¾ç½®</h2>
            <div class="setting-option">
                <label for="volume-control"><i class="fas fa-volume-up"></i> éŸ³é‡</label>
                <input type="range" id="volume-control" min="0" max="1" step="0.1" value="0.5">
            </div>
            <div class="setting-option">
                <label for="nickname-change"><i class="fas fa-user-edit"></i> æ›´æ”¹æ˜µç§°</label>
                <input type="text" id="nickname-change" placeholder="è¾“å…¥æ–°æ˜µç§°">
                <button id="update-nickname"><i class="fas fa-check"></i> æ›´æ–°</button>
            </div>
            <div class="setting-option">
                <label for="avatar-upload"><i class="fas fa-camera"></i> ä¸Šä¼ å¤´åƒ</label>
                <input type="file" id="avatar-upload" accept="image/*">
                <button id="upload-avatar"><i class="fas fa-upload"></i> ä¸Šä¼ </button>
                <p><i class="fas fa-info-circle"></i> è‡ªå®šä¹‰å¤´åƒéœ€è¦50é‡‘å¸è§£é”</p>
            </div>
            <div class="setting-option">
                <label><i class="fas fa-keyboard"></i> æ§åˆ¶æ–¹å¼</label>
                <div class="control-options">
                    <input type="radio" id="control-keyboard" name="control" value="keyboard" checked>
                    <label for="control-keyboard">é”®ç›˜</label>
                    <input type="radio" id="control-touch" name="control" value="touch">
                    <label for="control-touch">è§¦æ‘¸å±</label>
                </div>
            </div>
        </div>
        
        <!-- æ’è¡Œæ¦œ -->
        <div class="leaderboard-container" id="leaderboard-container">
            <h2><i class="fas fa-trophy"></i> æ’è¡Œæ¦œ</h2>
            <div class="tab-container">
                <div class="tab active" data-board="global">å…¨çƒæ¦œ</div>
                <div class="tab" data-board="friends">å¥½å‹æ¦œ</div>
                <div class="tab" data-board="daily">æ—¥æ¦œ</div>
                <div class="tab" data-board="live">å®æ—¶å¯¹æˆ˜</div>
            </div>
            
            <div class="leaderboard-content" id="global-board">
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>æ’å</th>
                            <th>ç©å®¶</th>
                            <th>åˆ†æ•°</th>
                        </tr>
                    </thead>
                    <tbody id="global-leaderboard">
                        <!-- æ’è¡Œæ¦œæ•°æ®å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
            
            <div class="leaderboard-content" id="friends-board" style="display: none;">
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>æ’å</th>
                            <th>ç©å®¶</th>
                            <th>åˆ†æ•°</th>
                        </tr>
                    </thead>
                    <tbody id="friends-leaderboard">
                        <!-- æ’è¡Œæ¦œæ•°æ®å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
            
            <div class="leaderboard-content" id="daily-board" style="display: none;">
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>æ’å</th>
                            <th>ç©å®¶</th>
                            <th>åˆ†æ•°</th>
                        </tr>
                    </thead>
                    <tbody id="daily-leaderboard">
                        <!-- æ’è¡Œæ¦œæ•°æ®å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
            
            <div class="leaderboard-content" id="live-board" style="display: none;">
                <div id="live-match-container">
                    <p>æ­£åœ¨å¯»æ‰¾å¯¹æ‰‹...</p>
                    <button id="start-live-match" class="auth-btn">å¼€å§‹å®æ—¶å¯¹æˆ˜</button>
                    <div id="live-match-info" style="display: none;">
                        <h3>å¯¹æˆ˜ä¿¡æ¯</h3>
                        <p>å¯¹æ‰‹: <span id="opponent-name"></span></p>
                        <p>åˆ†æ•°: <span id="live-score">0</span></p>
                        <p>æ—¶é—´: <span id="live-time">0</span>ç§’</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ç®¡ç†å‘˜é¢æ¿ -->
        <div class="admin-panel" id="admin-panel">
            <h2><i class="fas fa-user-shield"></i> ç®¡ç†å‘˜é¢æ¿</h2>
            <div class="admin-search">
                <input type="text" id="admin-search-user" placeholder="è¾“å…¥ç”¨æˆ·åæœç´¢...">
                <button id="admin-search-btn"><i class="fas fa-search"></i> æœç´¢</button>
            </div>
            
            <div class="user-details-admin" id="user-details-admin" style="display: none;">
                <h3 id="admin-username">ç”¨æˆ·å</h3>
                <p><i class="fas fa-id-card"></i> ID: <span id="admin-user-id"></span></p>
                <p><i class="fas fa-calendar-plus"></i> æ³¨å†Œæ—¥æœŸ: <span id="admin-reg-date"></span></p>
                <p><i class="fas fa-clock"></i> æœ€åç™»å½•: <span id="admin-last-login"></span></p>
                <p><i class="fas fa-star"></i> æœ€é«˜åˆ†: <span id="admin-high-score"></span></p>
                <p><i class="fas fa-coins"></i> é‡‘å¸: <span id="admin-user-coins"></span></p>
                <p><i class="fas fa-key"></i> é’¥åŒ™: <span id="admin-user-keys"></span></p>
                <p><i class="fas fa-crown"></i> VIPçŠ¶æ€: <span id="admin-vip-status"></span></p>
                
                <div class="admin-actions">
                    <button class="admin-btn" id="make-admin-btn"><i class="fas fa-user-shield"></i> è®¾ä¸ºç®¡ç†å‘˜</button>
                    <button class="admin-btn" id="ban-user-btn"><i class="fas fa-ban"></i> å°ç¦ç”¨æˆ·</button>
                    <button class="admin-btn" id="add-coins-btn"><i class="fas fa-coins"></i> æ·»åŠ é‡‘å¸</button>
                    <button class="admin-btn" id="add-keys-btn"><i class="fas fa-key"></i> æ·»åŠ é’¥åŒ™</button>
                    <button class="admin-btn" id="grant-vip-btn"><i class="fas fa-crown"></i> æˆäºˆVIP</button>
                    <button class="admin-btn" id="reset-password-btn"><i class="fas fa-key"></i> é‡ç½®å¯†ç </button>
                </div>
            </div>
            
            <div class="admin-stats">
                <h3><i class="fas fa-chart-line"></i> ç³»ç»Ÿç»Ÿè®¡</h3>
                <p><i class="fas fa-users"></i> æ€»ç”¨æˆ·æ•°: <span id="total-users">0</span></p>
                <p><i class="fas fa-user-clock"></i> åœ¨çº¿ç”¨æˆ·: <span id="online-users">0</span></p>
                <p><i class="fas fa-calendar-day"></i> ä»Šæ—¥æ´»è·ƒ: <span id="daily-active">0</span></p>
                <p><i class="fas fa-gamepad"></i> ä»Šæ—¥æ¸¸æˆæ¬¡æ•°: <span id="daily-games">0</span></p>
            </div>
        </div>
    </div>
    
    <!-- æ¸¸æˆç»“æŸç•Œé¢ -->
    <div class="game-over-container" id="game-over-container">
        <div class="game-over-content floating">
            <h2>æ¸¸æˆç»“æŸ!</h2>
            <p>ä½ çš„åˆ†æ•°:</p>
            <div class="score-value" id="final-score">0</div>
            <p>æœ€é«˜åˆ†: <span id="personal-best">0</span></p>
            <button class="restart-btn" id="restart-btn">
                <i class="fas fa-redo"></i> å†æ¥ä¸€å±€
            </button>
        </div>
    </div>
    
    <!-- é«˜åˆ†ç•Œé¢ -->
    <div class="high-score-container" id="high-score-container">
        <div class="high-score-content floating">
            <h2>æ­å–œ!</h2>
            <p>ä½ åˆ›é€ äº†æ–°çš„æœ€é«˜åˆ†:</p>
            <div class="score-value" id="new-high-score">0</div>
            <p>å…¨çƒæ’å: <span id="global-rank">0</span></p>
            <button class="restart-btn" id="high-score-restart-btn">
                <i class="fas fa-redo"></i> ç»§ç»­æ¸¸æˆ
            </button>
        </div>
    </div>
    
    <!-- é€šçŸ¥ -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-message">æ“ä½œæˆåŠŸ</span>
    </div>

    <script>
        // æ¸¸æˆä¸»é€»è¾‘
        document.addEventListener('DOMContentLoaded', function() {
            // æ¸¸æˆçŠ¶æ€
            const gameState = {
                isPlaying: false,
                score: 0,
                lives: 1,
                coins: 0,
                keys: 0,
                speed: 1,
                level: 1,
                isAdmin: false,
                isDev: false,
                playerSkin: 'default',
                playerAvatar: 'default',
                isVip: false,
                highScore: 0,
                volume: 0.5,
                controlType: 'keyboard',
                gameTime: 0,
                gameInterval: null,
                bombInterval: null,
                powerupInterval: null,
                bombs: [],
                powerups: [],
                lastFrameTime: 0,
                playerX: 0,
                playerY: 0,
                playerWidth: 40,
                playerHeight: 40,
                gameWidth: 0,
                gameHeight: 0,
                keysPressed: {},
                touchStartX: 0,
                touchStartY: 0
            };
            
            // ç”¨æˆ·æ•°æ®
            let currentUser = null;
            let users = JSON.parse(localStorage.getItem('bomb_dodge_users')) || [];
            let onlineUsers = [];
            let skins = [
                { id: 'default', name: 'é»˜è®¤çš®è‚¤', price: 0, owned: true, equipped: true, 
                  image: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%234CAF50"/><circle cx="35" cy="40" r="5" fill="white"/><circle cx="65" cy="40" r="5" fill="white"/><path d="M30,65 Q50,80 70,65" stroke="white" stroke-width="3" fill="none"/></svg>' },
                { id: 'ninja', name: 'å¿è€…', price: 100, owned: false, equipped: false,
                  image: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23212121"/><circle cx="35" cy="40" r="5" fill="white"/><circle cx="65" cy="40" r="5" fill="white"/><path d="M30,65 Q50,80 70,65" stroke="white" stroke-width="3" fill="none"/><path d="M50,20 L50,30" stroke="white" stroke-width="3"/></svg>' },
                { id: 'robot', name: 'æœºå™¨äºº', price: 150, owned: false, equipped: false,
                  image: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect x="20" y="20" width="60" height="60" rx="10" fill="%23FF5722"/><circle cx="35" cy="40" r="5" fill="white"/><circle cx="65" cy="40" r="5" fill="white"/><rect x="40" y="60" width="20" height="10" fill="white"/></svg>' },
                { id: 'alien', name: 'å¤–æ˜Ÿäºº', price: 200, owned: false, equipped: false,
                  image: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%238BC34A"/><ellipse cx="35" cy="40" rx="8" ry="5" fill="white"/><ellipse cx="65" cy="40" rx="8" ry="5" fill="white"/><path d="M30,65 Q50,85 70,65" stroke="white" stroke-width="3" fill="none"/></svg>' },
                { id: 'vip', name: 'VIPä¸“å±', price: 500, owned: false, equipped: false, vipOnly: true,
                  image: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23FFC107"/><circle cx="35" cy="40" r="5" fill="white"/><circle cx="65" cy="40" r="5" fill="white"/><path d="M30,65 Q50,80 70,65" stroke="white" stroke-width="3" fill="none"/><path d="M20,20 L30,30 M80,20 L70,30 M20,80 L30,70 M80,80 L70,70" stroke="white" stroke-width="2"/></svg>' }
            ];
            
            let avatars = [
                { id: 'default', name: 'é»˜è®¤å¤´åƒ', price: 0, owned: true, equipped: true, 
                  image: 'https://via.placeholder.com/50' },
                { id: 'cat', name: 'çŒ«å’ª', price: 50, owned: false, equipped: false,
                  image: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23FF9800"/><circle cx="35" cy="40" r="5" fill="white"/><circle cx="65" cy="40" r="5" fill="white"/><circle cx="35" cy="40" r="2" fill="black"/><circle cx="65" cy="40" r="2" fill="black"/><path d="M40,60 Q50,70 60,60" stroke="black" stroke-width="2" fill="none"/><path d="M30,25 L40,20 M70,25 L60,20" stroke="black" stroke-width="2" fill="none"/></svg>' },
                { id: 'dog', name: 'ç‹—ç‹—', price: 50, owned: false, equipped: false,
                  image: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23795548"/><circle cx="35" cy="40" r="5" fill="white"/><circle cx="65" cy="40" r="5" fill="white"/><circle cx="35" cy="40" r="2" fill="black"/><circle cx="65" cy="40" r="2" fill="black"/><path d="M40,60 Q50,65 60,60" stroke="black" stroke-width="2" fill="none"/><path d="M45,55 L50,60 L55,55" stroke="black" stroke-width="2" fill="none"/></svg>' },
                { id: 'panda', name: 'ç†ŠçŒ«', price: 100, owned: false, equipped: false,
                  image: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="white"/><circle cx="35" cy="40" r="8" fill="black"/><circle cx="65" cy="40" r="8" fill="black"/><circle cx="35" cy="40" r="3" fill="white"/><circle cx="65" cy="40" r="3" fill="white"/><path d="M30,60 Q50,70 70,60" stroke="black" stroke-width="2" fill="none"/><circle cx="50" cy="30" r="5" fill="black"/></svg>' },
                { id: 'vip', name: 'VIPä¸“å±', price: 200, owned: false, equipped: false, vipOnly: true,
                  image: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23FFC107"/><circle cx="50" cy="50" r="35" fill="%23FF5722"/><text x="50" y="55" font-family="Arial" font-size="30" fill="white" text-anchor="middle" font-weight="bold">VIP</text></svg>' }
            ];
            
            // DOMå…ƒç´ 
            const elements = {
                authContainer: document.getElementById('auth-container'),
                loginForm: document.getElementById('login-form'),
                registerForm: document.getElementById('register-form'),
                mainContainer: document.getElementById('main-container'),
                gameContainer: document.getElementById('game-container'),
                gameCanvas: document.getElementById('game-canvas'),
                player: document.getElementById('player'),
                controls: document.getElementById('controls'),
                usernameDisplay: document.getElementById('username-display'),
                userAvatar: document.getElementById('user-avatar'),
                vipStatus: document.getElementById('user-vip-status'),
                coinsDisplay: document.getElementById('coins-display'),
                keysDisplay: document.getElementById('keys-display'),
                livesDisplay: document.getElementById('lives-display'),
                playBtn: document.getElementById('play-btn'),
                shopBtn: document.getElementById('shop-btn'),
                settingsBtn: document.getElementById('settings-btn'),
                leaderboardBtn: document.getElementById('leaderboard-btn'),
                switchAccountBtn: document.getElementById('switch-account-btn'),
                contactBtn: document.getElementById('contact-btn'),
                qqGroupBtn: document.getElementById('qq-group-btn'),
                shopContainer: document.getElementById('shop-container'),
                settingsContainer: document.getElementById('settings-container'),
                leaderboardContainer: document.getElementById('leaderboard-container'),
                adminPanel: document.getElementById('admin-panel'),
                gameOverContainer: document.getElementById('game-over-container'),
                highScoreContainer: document.getElementById('high-score-container'),
                finalScore: document.getElementById('final-score'),
                personalBest: document.getElementById('personal-best'),
                newHighScore: document.getElementById('new-high-score'),
                globalRank: document.getElementById('global-rank'),
                restartBtn: document.getElementById('restart-btn'),
                highScoreRestartBtn: document.getElementById('high-score-restart-btn'),
                notification: document.getElementById('notification'),
                notificationMessage: document.getElementById('notification-message'),
                volumeControl: document.getElementById('volume-control'),
                nicknameChange: document.getElementById('nickname-change'),
                updateNickname: document.getElementById('update-nickname'),
                avatarUpload: document.getElementById('avatar-upload'),
                uploadAvatar: document.getElementById('upload-avatar'),
                skinsItems: document.getElementById('skins-items'),
                avatarsItems: document.getElementById('avatars-items'),
                globalLeaderboard: document.getElementById('global-leaderboard'),
                friendsLeaderboard: document.getElementById('friends-leaderboard'),
                dailyLeaderboard: document.getElementById('daily-leaderboard'),
                adminSearchUser: document.getElementById('admin-search-user'),
                adminSearchBtn: document.getElementById('admin-search-btn'),
                userDetailsAdmin: document.getElementById('user-details-admin'),
                makeAdminBtn: document.getElementById('make-admin-btn'),
                banUserBtn: document.getElementById('ban-user-btn'),
                addCoinsBtn: document.getElementById('add-coins-btn'),
                addKeysBtn: document.getElementById('add-keys-btn'),
                grantVipBtn: document.getElementById('grant-vip-btn'),
                totalUsers: document.getElementById('total-users'),
                onlineUsers: document.getElementById('online-users'),
                dailyActive: document.getElementById('daily-active'),
                loginUsername: document.getElementById('login-username'),
                loginPassword: document.getElementById('login-password'),
                rememberMe: document.getElementById('remember-me'),
                loginBtn: document.getElementById('login-btn'),
                switchToRegister: document.getElementById('switch-to-register'),
                registerUsername: document.getElementById('register-username'),
                registerPassword: document.getElementById('register-password'),
                registerConfirmPassword: document.getElementById('register-confirm-password'),
                registerBtn: document.getElementById('register-btn'),
                switchToLogin: document.getElementById('switch-to-login'),
                upBtn: document.getElementById('up-btn'),
                leftBtn: document.getElementById('left-btn'),
                rightBtn: document.getElementById('right-btn'),
                downBtn: document.getElementById('down-btn'),
                controlKeyboard: document.getElementById('control-keyboard'),
                controlTouch: document.getElementById('control-touch'),
                startLiveMatch: document.getElementById('start-live-match'),
                liveMatchInfo: document.getElementById('live-match-info'),
                opponentName: document.getElementById('opponent-name'),
                liveScore: document.getElementById('live-score'),
                liveTime: document.getElementById('live-time')
            };
            
            // åˆå§‹åŒ–æ¸¸æˆ
            function initGame() {
                // è®¾ç½®ç”»å¸ƒå¤§å°
                const canvas = elements.gameCanvas;
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                gameState.gameWidth = canvas.width;
                gameState.gameHeight = canvas.height;
                
                // åˆå§‹åŒ–ç©å®¶ä½ç½®
                gameState.playerX = canvas.width / 2 - gameState.playerWidth / 2;
                gameState.playerY = canvas.height - gameState.playerHeight - 20;
                elements.player.style.left = `${gameState.playerX}px`;
                elements.player.style.top = `${gameState.playerY}px`;
                
                // é‡ç½®æ¸¸æˆçŠ¶æ€
                gameState.score = 0;
                gameState.lives = currentUser ? currentUser.lives || 1 : 1;
                gameState.speed = 1;
                gameState.level = 1;
                gameState.gameTime = 0;
                gameState.bombs = [];
                gameState.powerups = [];
                gameState.keysPressed = {};
                
                // æ›´æ–°UI
                updateUI();
                
                // å¼€å§‹æ¸¸æˆå¾ªç¯
                gameState.isPlaying = true;
                gameState.lastFrameTime = performance.now();
                gameState.gameInterval = setInterval(updateGame, 16); // ~60fps
                gameState.bombInterval = setInterval(createBomb, 1000);
                gameState.powerupInterval = setInterval(createPowerup, 3000);
                
                // æ ¹æ®æ§åˆ¶ç±»å‹æ˜¾ç¤º/éšè—æ§åˆ¶æŒ‰é’®
                if (gameState.controlType === 'touch') {
                    elements.controls.style.display = 'grid';
                } else {
                    elements.controls.style.display = 'none';
                }
            }
            
            // æ›´æ–°æ¸¸æˆçŠ¶æ€
            function updateGame() {
                const now = performance.now();
                const deltaTime = (now - gameState.lastFrameTime) / 1000; // è½¬æ¢ä¸ºç§’
                gameState.lastFrameTime = now;
                
                // æ›´æ–°æ¸¸æˆæ—¶é—´
                gameState.gameTime += deltaTime;
                
                // å¢åŠ éš¾åº¦
                gameState.level = Math.floor(gameState.gameTime / 10) + 1;
                gameState.speed = 1 + gameState.level * 0.2;
                
                // ç§»åŠ¨ç©å®¶
                movePlayer(deltaTime);
                
                // ç§»åŠ¨ç‚¸å¼¹å’Œé“å…·
                moveBombs(deltaTime);
                movePowerups(deltaTime);
                
                // æ£€æµ‹ç¢°æ’
                checkCollisions();
                
                // æ¸²æŸ“æ¸¸æˆ
                renderGame();
            }
            
            // ç§»åŠ¨ç©å®¶
            function movePlayer(deltaTime) {
                const speed = 200 * gameState.speed * deltaTime;
                
                if (gameState.controlType === 'keyboard') {
                    if (gameState.keysPressed['ArrowUp'] || gameState.keysPressed['w']) {
                        gameState.playerY = Math.max(0, gameState.playerY - speed);
                    }
                    if (gameState.keysPressed['ArrowDown'] || gameState.keysPressed['s']) {
                        gameState.playerY = Math.min(gameState.gameHeight - gameState.playerHeight, gameState.playerY + speed);
                    }
                    if (gameState.keysPressed['ArrowLeft'] || gameState.keysPressed['a']) {
                        gameState.playerX = Math.max(0, gameState.playerX - speed);
                    }
                    if (gameState.keysPressed['ArrowRight'] || gameState.keysPressed['d']) {
                        gameState.playerX = Math.min(gameState.gameWidth - gameState.playerWidth, gameState.playerX + speed);
                    }
                }
                
                // æ›´æ–°ç©å®¶ä½ç½®
                elements.player.style.left = `${gameState.playerX}px`;
                elements.player.style.top = `${gameState.playerY}px`;
            }
            
            // åˆ›å»ºç‚¸å¼¹
            function createBomb() {
                const bomb = {
                    x: Math.random() * (gameState.gameWidth - 30),
                    y: -30,
                    width: 30,
                    height: 30,
                    speed: 100 + Math.random() * 50 * gameState.speed
                };
                
                gameState.bombs.push(bomb);
            }
            
            // ç§»åŠ¨ç‚¸å¼¹
            function moveBombs(deltaTime) {
                for (let i = gameState.bombs.length - 1; i >= 0; i--) {
                    const bomb = gameState.bombs[i];
                    bomb.y += bomb.speed * deltaTime;
                    
                    // ç§»é™¤è¶…å‡ºå±å¹•çš„ç‚¸å¼¹
                    if (bomb.y > gameState.gameHeight) {
                        gameState.bombs.splice(i, 1);
                        gameState.score += 1;
                        updateUI();
                    }
                }
            }
            
            // åˆ›å»ºé“å…·
            function createPowerup() {
                const types = ['coin', 'life', 'key', 'speedUp', 'speedDown'];
                const weights = [0.5, 0.2, 0.1, 0.1, 0.1]; // ä¸åŒé“å…·çš„å‡ºç°æƒé‡
                
                let random = Math.random();
                let typeIndex = 0;
                let cumulativeWeight = 0;
                
                for (let i = 0; i < weights.length; i++) {
                    cumulativeWeight += weights[i];
                    if (random <= cumulativeWeight) {
                        typeIndex = i;
                        break;
                    }
                }
                
                const powerup = {
                    x: Math.random() * (gameState.gameWidth - 25),
                    y: -25,
                    width: 25,
                    height: 25,
                    speed: 80 + Math.random() * 40 * gameState.speed,
                    type: types[typeIndex]
                };
                
                gameState.powerups.push(powerup);
            }
            
            // ç§»åŠ¨é“å…·
            function movePowerups(deltaTime) {
                for (let i = gameState.powerups.length - 1; i >= 0; i--) {
                    const powerup = gameState.powerups[i];
                    powerup.y += powerup.speed * deltaTime;
                    
                    // ç§»é™¤è¶…å‡ºå±å¹•çš„é“å…·
                    if (powerup.y > gameState.gameHeight) {
                        gameState.powerups.splice(i, 1);
                    }
                }
            }
            
            // æ£€æµ‹ç¢°æ’
            function checkCollisions() {
                // ç©å®¶çŸ©å½¢
                const playerRect = {
                    x: gameState.playerX,
                    y: gameState.playerY,
                    width: gameState.playerWidth,
                    height: gameState.playerHeight
                };
                
                // æ£€æµ‹ç‚¸å¼¹ç¢°æ’
                for (let i = gameState.bombs.length - 1; i >= 0; i--) {
                    const bomb = gameState.bombs[i];
                    const bombRect = {
                        x: bomb.x,
                        y: bomb.y,
                        width: bomb.width,
                        height: bomb.height
                    };
                    
                    if (checkRectCollision(playerRect, bombRect)) {
                        // ç¢°æ’å‘ç”Ÿ
                        gameState.bombs.splice(i, 1);
                        createExplosion(bomb.x, bomb.y);
                        handleBombCollision();
                        break; // ä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªç¢°æ’
                    }
                }
                
                // æ£€æµ‹é“å…·ç¢°æ’
                for (let i = gameState.powerups.length - 1; i >= 0; i--) {
                    const powerup = gameState.powerups[i];
                    const powerupRect = {
                        x: powerup.x,
                        y: powerup.y,
                        width: powerup.width,
                        height: powerup.height
                    };
                    
                    if (checkRectCollision(playerRect, powerupRect)) {
                        // ç¢°æ’å‘ç”Ÿ
                        gameState.powerups.splice(i, 1);
                        createCollectEffect(powerup.x, powerup.y);
                        handlePowerupCollision(powerup.type);
                    }
                }
            }
            
            // åˆ›å»ºçˆ†ç‚¸æ•ˆæœ
            function createExplosion(x, y) {
                const explosion = document.createElement('div');
                explosion.className = 'explosion';
                explosion.style.left = `${x - 10}px`;
                explosion.style.top = `${y - 10}px`;
                elements.gameContainer.appendChild(explosion);
                
                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    explosion.remove();
                }, 500);
            }
            
            // åˆ›å»ºæ”¶é›†æ•ˆæœ
            function createCollectEffect(x, y) {
                const effect = document.createElement('div');
                effect.className = 'collect-effect';
                effect.style.left = `${x - 7.5}px`;
                effect.style.top = `${y - 7.5}px`;
                elements.gameContainer.appendChild(effect);
                
                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    effect.remove();
                }, 500);
            }
            
            // çŸ©å½¢ç¢°æ’æ£€æµ‹
            function checkRectCollision(rect1, rect2) {
                return rect1.x < rect2.x + rect2.width &&
                       rect1.x + rect1.width > rect2.x &&
                       rect1.y < rect2.y + rect2.height &&
                       rect1.y + rect1.height > rect2.y;
            }
            
            // å¤„ç†ç‚¸å¼¹ç¢°æ’
            function handleBombCollision() {
                if (gameState.lives > 0) {
                    gameState.lives--;
                    updateUI();
                    showNotification('ä½ è¢«ç‚¸å¼¹å‡»ä¸­äº†!', 'error');
                    
                    if (gameState.lives <= 0) {
                        endGame();
                    }
                } else {
                    endGame();
                }
            }
            
            // å¤„ç†é“å…·ç¢°æ’
            function handlePowerupCollision(type) {
                switch (type) {
                    case 'coin':
                        gameState.coins += 5;
                        gameState.score += 5;
                        showNotification('+5 é‡‘å¸!', 'success');
                        break;
                    case 'life':
                        gameState.lives++;
                        showNotification('+1 ç”Ÿå‘½!', 'success');
                        break;
                    case 'key':
                        gameState.keys++;
                        showNotification('+1 é’¥åŒ™!', 'success');
                        break;
                    case 'speedUp':
                        gameState.speed *= 1.2;
                        showNotification('é€Ÿåº¦æå‡!', 'warning');
                        setTimeout(() => {
                            gameState.speed /= 1.2;
                        }, 3000);
                        break;
                    case 'speedDown':
                        gameState.speed *= 0.8;
                        showNotification('é€Ÿåº¦é™ä½!', 'warning');
                        setTimeout(() => {
                            gameState.speed /= 0.8;
                        }, 3000);
                        break;
                }
                
                updateUI();
            }
            
            // æ¸²æŸ“æ¸¸æˆ
            function renderGame() {
                const ctx = elements.gameCanvas.getContext('2d');
                
                // æ¸…ç©ºç”»å¸ƒ
                ctx.clearRect(0, 0, gameState.gameWidth, gameState.gameHeight);
                
                // ç»˜åˆ¶èƒŒæ™¯
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                ctx.fillRect(0, 0, gameState.gameWidth, gameState.gameHeight);
                
                // ç»˜åˆ¶ç‚¸å¼¹
                ctx.font = '30px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                gameState.bombs.forEach(bomb => {
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                    ctx.fillText('ğŸ’£', bomb.x + bomb.width / 2, bomb.y + bomb.height / 2);
                });
                
                // ç»˜åˆ¶é“å…·
                ctx.font = '25px Arial';
                gameState.powerups.forEach(powerup => {
                    let symbol, color;
                    switch (powerup.type) {
                        case 'coin': 
                            symbol = 'ğŸ’°';
                            color = 'rgba(255, 255, 255, 0.9)';
                            break;
                        case 'life': 
                            symbol = 'â¤ï¸';
                            color = 'rgba(255, 50, 50, 0.9)';
                            break;
                        case 'key': 
                            symbol = 'ğŸ”‘';
                            color = 'rgba(255, 215, 0, 0.9)';
                            break;
                        case 'speedUp': 
                            symbol = 'âš¡';
                            color = 'rgba(255, 255, 0, 0.9)';
                            break;
                        case 'speedDown': 
                            symbol = 'ğŸ¢';
                            color = 'rgba(100, 255, 100, 0.9)';
                            break;
                    }
                    ctx.fillStyle = color;
                    ctx.fillText(symbol, powerup.x + powerup.width / 2, powerup.y + powerup.height / 2);
                });
                
                // ç»˜åˆ¶UI
                ctx.font = '20px Arial';
                ctx.fillStyle = 'white';
                ctx.textAlign = 'left';
                ctx.textBaseline = 'top';
                ctx.fillText(`åˆ†æ•°: ${gameState.score}`, 10, 10);
                ctx.fillText(`ç­‰çº§: ${gameState.level}`, 10, 40);
                ctx.fillText(`é€Ÿåº¦: ${gameState.speed.toFixed(1)}x`, 10, 70);
                ctx.fillText(`ç”Ÿå‘½: ${gameState.lives}`, 10, 100);
            }
            
            // ç»“æŸæ¸¸æˆ
            function endGame() {
                gameState.isPlaying = false;
                clearInterval(gameState.gameInterval);
                clearInterval(gameState.bombInterval);
                clearInterval(gameState.powerupInterval);
                
                // æ›´æ–°ç”¨æˆ·æ•°æ®
                if (currentUser) {
                    if (gameState.score > (currentUser.highScore || 0)) {
                        currentUser.highScore = gameState.score;
                        showHighScore();
                    } else {
                        showGameOver();
                    }
                    
                    currentUser.coins += gameState.coins;
                    currentUser.keys += gameState.keys;
                    currentUser.lastPlayed = new Date().toISOString();
                    
                    // ä¿å­˜ç”¨æˆ·æ•°æ®
                    saveUserData();
                } else {
                    showGameOver();
                }
            }
            
            // æ˜¾ç¤ºæ¸¸æˆç»“æŸç•Œé¢
            function showGameOver() {
                elements.finalScore.textContent = gameState.score;
                elements.personalBest.textContent = currentUser ? currentUser.highScore || 0 : 0;
                elements.gameOverContainer.style.display = 'flex';
            }
            
            // æ˜¾ç¤ºé«˜åˆ†ç•Œé¢
            function showHighScore() {
                elements.newHighScore.textContent = gameState.score;
                // è¿™é‡Œå¯ä»¥æ·»åŠ è·å–å…¨çƒæ’åçš„é€»è¾‘
                elements.highScoreContainer.style.display = 'flex';
            }
            
            // æ›´æ–°UI
            function updateUI() {
                elements.coinsDisplay.textContent = gameState.coins;
                elements.keysDisplay.textContent = gameState.keys;
                elements.livesDisplay.textContent = gameState.lives;
            }
            
            // ç”¨æˆ·è®¤è¯
            function login(username, password) {
                // å¼€å‘è€…è´¦å· (éšè—å¼€å‘è€…ç™»å½•æ¡†ï¼Œç›´æ¥ä½¿ç”¨é¢„è®¾å¯†ç )
                if (username === '3530388417' && password === '19996837879gxh') {
                    gameState.isAdmin = true;
                    gameState.isDev = true;
                    gameState.coins = Infinity;
                    gameState.keys = Infinity;
                    
                    currentUser = {
                        username: 'å¼€å‘è€…',
                        isAdmin: true,
                        coins: Infinity,
                        keys: Infinity,
                        highScore: 9999,
                        isVip: true,
                        skins: skins.map(skin => ({ ...skin, owned: true })),
                        avatars: avatars.map(avatar => ({ ...avatar, owned: true })),
                        registeredAt: new Date().toISOString(),
                        lastLogin: new Date().toISOString()
                    };
                    
                    showMainUI();
                    showNotification('å¼€å‘è€…æ¨¡å¼å·²æ¿€æ´»', 'success');
                    return;
                }
                
                // æŸ¥æ‰¾ç”¨æˆ·
                const user = users.find(u => u.username === username && u.password === password);
                
                if (user) {
                    if (user.banned) {
                        showNotification('æ­¤è´¦å·å·²è¢«å°ç¦', 'error');
                        return;
                    }
                    
                    currentUser = user;
                    currentUser.lastLogin = new Date().toISOString();
                    
                    // æ›´æ–°æ¸¸æˆçŠ¶æ€
                    gameState.isAdmin = currentUser.isAdmin || false;
                    gameState.coins = currentUser.coins || 0;
                    gameState.keys = currentUser.keys || 0;
                    gameState.playerSkin = currentUser.equippedSkin || 'default';
                    gameState.playerAvatar = currentUser.equippedAvatar || 'default';
                    gameState.isVip = currentUser.isVip || false;
                    
                    // è®°ä½ç™»å½•çŠ¶æ€
                    if (elements.rememberMe.checked) {
                        localStorage.setItem('remembered_user', JSON.stringify({
                            username: currentUser.username,
                            password: currentUser.password
                        }));
                    }
                    
                    // æ›´æ–°UI
                    updateUserUI();
                    showMainUI();
                    showNotification('ç™»å½•æˆåŠŸ', 'success');
                    
                    // ä¿å­˜ç”¨æˆ·æ•°æ®
                    saveUserData();
                } else {
                    showNotification('ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯', 'error');
                }
            }
            
            // æ³¨å†Œç”¨æˆ·
            function register(username, password, confirmPassword) {
                if (password !== confirmPassword) {
                    showNotification('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´', 'error');
                    return;
                }
                
                if (users.some(u => u.username === username)) {
                    showNotification('ç”¨æˆ·åå·²å­˜åœ¨', 'error');
                    return;
                }
                
                const newUser = {
                    username,
                    password,
                    coins: 0,
                    keys: 0,
                    highScore: 0,
                    lives: 1,
                    isAdmin: false,
                    isVip: false,
                    skins: [{ id: 'default', owned: true, equipped: true }],
                    avatars: [{ id: 'default', owned: true, equipped: true }],
                    registeredAt: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                };
                
                users.push(newUser);
                saveUserData();
                
                showNotification('æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•', 'success');
                switchToLogin();
            }
            
            // ä¿å­˜ç”¨æˆ·æ•°æ®
            function saveUserData() {
                if (currentUser) {
                    const index = users.findIndex(u => u.username === currentUser.username);
                    if (index !== -1) {
                        users[index] = currentUser;
                    }
                }
                
                localStorage.setItem('bomb_dodge_users', JSON.stringify(users));
            }
            
            // æ›´æ–°ç”¨æˆ·UI
            function updateUserUI() {
                if (!currentUser) return;
                
                elements.usernameDisplay.textContent = currentUser.username;
                elements.coinsDisplay.textContent = currentUser.coins;
                elements.keysDisplay.textContent = currentUser.keys;
                
                // è®¾ç½®å¤´åƒ
                const equippedAvatar = avatars.find(a => a.id === gameState.playerAvatar);
                if (equippedAvatar) {
                    elements.userAvatar.src = equippedAvatar.image;
                }
                
                // æ›´æ–°VIPçŠ¶æ€
                if (currentUser.isVip) {
                    elements.vipStatus.innerHTML = '<span class="vip-badge">VIP</span>';
                } else {
                    elements.vipStatus.textContent = 'æ™®é€šç”¨æˆ·';
                }
                
                // æ˜¾ç¤º/éšè—ç®¡ç†å‘˜é¢æ¿
                if (gameState.isAdmin) {
                    elements.adminPanel.style.display = 'block';
                    updateAdminStats();
                } else {
                    elements.adminPanel.style.display = 'none';
                }
                
                // æ›´æ–°å•†åº—
                updateShop();
            }
            
            // æ›´æ–°å•†åº—
            function updateShop() {
                // æ¸…ç©ºç°æœ‰é¡¹ç›®
                elements.skinsItems.innerHTML = '';
                elements.avatarsItems.innerHTML = '';
                
                // æ·»åŠ çš®è‚¤
                skins.forEach(skin => {
                    const owned = currentUser.skins?.some(s => s.id === skin.id && s.owned) || false;
                    const equipped = currentUser.skins?.some(s => s.id === skin.id && s.equipped) || false;
                    const vipOnly = skin.vipOnly || false;
                    const canBuy = !owned && (!vipOnly || gameState.isVip);
                    
                    const skinItem = document.createElement('div');
                    skinItem.className = `shop-item ${owned ? 'owned' : ''} ${equipped ? 'equipped' : ''} ${!canBuy ? 'disabled' : ''}`;
                    skinItem.innerHTML = `
                        <img src="${skin.image}" alt="${skin.name}">
                        <h3>${skin.name}</h3>
                        <div class="price">${owned ? 'å·²æ‹¥æœ‰' : `${skin.price} <i class="fas fa-coins"></i>`}</div>
                    `;
                    
                    if (canBuy) {
                        skinItem.addEventListener('click', () => buyItem('skin', skin.id));
                    } else if (owned && !equipped) {
                        skinItem.addEventListener('click', () => equipItem('skin', skin.id));
                    }
                    
                    elements.skinsItems.appendChild(skinItem);
                });
                
                // æ·»åŠ å¤´åƒ
                avatars.forEach(avatar => {
                    const owned = currentUser.avatars?.some(a => a.id === avatar.id && a.owned) || false;
                    const equipped = currentUser.avatars?.some(a => a.id === avatar.id && a.equipped) || false;
                    const vipOnly = avatar.vipOnly || false;
                    const canBuy = !owned && (!vipOnly || gameState.isVip);
                    
                    const avatarItem = document.createElement('div');
                    avatarItem.className = `shop-item ${owned ? 'owned' : ''} ${equipped ? 'equipped' : ''} ${!canBuy ? 'disabled' : ''}`;
                    avatarItem.innerHTML = `
                        <img src="${avatar.image}" alt="${avatar.name}">
                        <h3>${avatar.name}</h3>
                        <div class="price">${owned ? 'å·²æ‹¥æœ‰' : `${avatar.price} <i class="fas fa-coins"></i>`}</div>
                    `;
                    
                    if (canBuy) {
                        avatarItem.addEventListener('click', () => buyItem('avatar', avatar.id));
                    } else if (owned && !equipped) {
                        avatarItem.addEventListener('click', () => equipItem('avatar', avatar.id));
                    }
                    
                    elements.avatarsItems.appendChild(avatarItem);
                });
            }
            
            // è´­ä¹°ç‰©å“
            function buyItem(type, id) {
                const item = type === 'skin' 
                    ? skins.find(s => s.id === id)
                    : avatars.find(a => a.id === id);
                
                if (!item) return;
                
                if (gameState.coins < item.price) {
                    showNotification('é‡‘å¸ä¸è¶³', 'error');
                    return;
                }
                
                gameState.coins -= item.price;
                
                if (type === 'skin') {
                    if (!currentUser.skins) currentUser.skins = [];
                    currentUser.skins.push({ id, owned: true, equipped: false });
                } else {
                    if (!currentUser.avatars) currentUser.avatars = [];
                    currentUser.avatars.push({ id, owned: true, equipped: false });
                }
                
                saveUserData();
                updateUserUI();
                showNotification(`æˆåŠŸè´­ä¹° ${item.name}`, 'success');
            }
            
            // è£…å¤‡ç‰©å“
            function equipItem(type, id) {
                if (type === 'skin') {
                    // å–æ¶ˆè£…å¤‡æ‰€æœ‰çš®è‚¤
                    currentUser.skins.forEach(skin => {
                        skin.equipped = false;
                    });
                    
                    // è£…å¤‡é€‰ä¸­çš„çš®è‚¤
                    const skin = currentUser.skins.find(s => s.id === id);
                    if (skin) {
                        skin.equipped = true;
                        gameState.playerSkin = id;
                    }
                } else {
                    // å–æ¶ˆè£…å¤‡æ‰€æœ‰å¤´åƒ
                    currentUser.avatars.forEach(avatar => {
                        avatar.equipped = false;
                    });
                    
                    // è£…å¤‡é€‰ä¸­çš„å¤´åƒ
                    const avatar = currentUser.avatars.find(a => a.id === id);
                    if (avatar) {
                        avatar.equipped = true;
                        gameState.playerAvatar = id;
                        
                        // æ›´æ–°å¤´åƒæ˜¾ç¤º
                        const item = avatars.find(a => a.id === id);
                        if (item) {
                            elements.userAvatar.src = item.image;
                        }
                    }
                }
                
                saveUserData();
                updateUserUI();
                showNotification('è£…å¤‡æˆåŠŸ', 'success');
            }
            
            // è´­ä¹°VIP
            function buyVip(type) {
                const price = type === 'month' ? 200 : 1000;
                
                if (gameState.coins < price) {
                    showNotification('é‡‘å¸ä¸è¶³', 'error');
                    return;
                }
                
                gameState.coins -= price;
                currentUser.isVip = true;
                currentUser.vipExpires = new Date();
                if (type === 'month') {
                    currentUser.vipExpires.setMonth(currentUser.vipExpires.getMonth() + 1);
                } else {
                    currentUser.vipExpires.setFullYear(currentUser.vipExpires.getFullYear() + 1);
                }
                
                gameState.isVip = true;
                saveUserData();
                updateUserUI();
                showNotification('VIPè´­ä¹°æˆåŠŸ!', 'success');
            }
            
            // æ›´æ–°ç®¡ç†å‘˜ç»Ÿè®¡
            function updateAdminStats() {
                elements.totalUsers.textContent = users.length;
                elements.onlineUsers.textContent = 1; // å½“å‰åªæœ‰è‡ªå·±åœ¨çº¿
                elements.dailyActive.textContent = users.filter(u => {
                    const lastLogin = new Date(u.lastLogin || 0);
                    const today = new Date();
                    return lastLogin.toDateString() === today.toDateString();
                }).length;
            }
            
            // æœç´¢ç”¨æˆ· (ç®¡ç†å‘˜åŠŸèƒ½)
            function searchUser(username) {
                const user = users.find(u => u.username.toLowerCase().includes(username.toLowerCase()));
                
                if (user) {
                    elements.userDetailsAdmin.style.display = 'block';
                    elements.adminUsername.textContent = user.username;
                    elements.adminUserId.textContent = user.username; // ç®€å•ç¤ºä¾‹ï¼Œå®é™…å¯ä»¥ä½¿ç”¨ID
                    
                    const regDate = new Date(user.registeredAt);
                    elements.adminRegDate.textContent = regDate.toLocaleDateString();
                    
                    const lastLogin = new Date(user.lastLogin || user.registeredAt);
                    elements.adminLastLogin.textContent = lastLogin.toLocaleString();
                    
                    elements.adminHighScore.textContent = user.highScore || 0;
                    elements.adminUserCoins.textContent = user.coins || 0;
                    elements.adminUserKeys.textContent = user.keys || 0;
                    
                    if (user.isVip) {
                        elements.adminVipStatus.textContent = 'VIPç”¨æˆ·';
                        if (user.vipExpires) {
                            const expires = new Date(user.vipExpires);
                            elements.adminVipStatus.textContent += ` (æœ‰æ•ˆæœŸè‡³ ${expires.toLocaleDateString()})`;
                        }
                    } else {
                        elements.adminVipStatus.textContent = 'æ™®é€šç”¨æˆ·';
                    }
                } else {
                    showNotification('æœªæ‰¾åˆ°ç”¨æˆ·', 'error');
                    elements.userDetailsAdmin.style.display = 'none';
                }
            }
            
            // ç®¡ç†å‘˜æ“ä½œ
            function adminAction(action) {
                const username = elements.adminUsername.textContent;
                const user = users.find(u => u.username === username);
                
                if (!user) {
                    showNotification('ç”¨æˆ·æ•°æ®é”™è¯¯', 'error');
                    return;
                }
                
                switch (action) {
                    case 'makeAdmin':
                        user.isAdmin = true;
                        showNotification(`${username} å·²æˆä¸ºç®¡ç†å‘˜`, 'success');
                        break;
                    case 'ban':
                        user.banned = true;
                        showNotification(`${username} å·²è¢«å°ç¦`, 'success');
                        break;
                    case 'addCoins':
                        user.coins += 100;
                        showNotification(`å·²ä¸º ${username} æ·»åŠ 100é‡‘å¸`, 'success');
                        break;
                    case 'addKeys':
                        user.keys += 5;
                        showNotification(`å·²ä¸º ${username} æ·»åŠ 5æŠŠé’¥åŒ™`, 'success');
                        break;
                    case 'grantVip':
                        user.isVip = true;
                        user.vipExpires = new Date();
                        user.vipExpires.setFullYear(user.vipExpires.getFullYear() + 1);
                        showNotification(`å·²ä¸º ${username} æˆäºˆVIPå¹´å¡`, 'success');
                        break;
                    case 'resetPassword':
                        user.password = 'default123';
                        showNotification(`å·²å°† ${username} çš„å¯†ç é‡ç½®ä¸º default123`, 'success');
                        break;
                }
                
                saveUserData();
                searchUser(username); // åˆ·æ–°ç”¨æˆ·ä¿¡æ¯
            }
            
            // æ˜¾ç¤ºé€šçŸ¥
            function showNotification(message, type) {
                elements.notification.className = `notification ${type}`;
                elements.notificationMessage.textContent = message;
                
                const icon = elements.notification.querySelector('i');
                icon.className = {
                    success: 'fas fa-check-circle',
                    error: 'fas fa-times-circle',
                    warning: 'fas fa-exclamation-circle'
                }[type] || 'fas fa-info-circle';
                
                elements.notification.classList.add('show');
                
                setTimeout(() => {
                    elements.notification.classList.remove('show');
                }, 3000);
            }
            
            // åˆ‡æ¢ç™»å½•/æ³¨å†Œè¡¨å•
            function switchToRegister() {
                elements.loginForm.style.display = 'none';
                elements.registerForm.style.display = 'block';
            }
            
            function switchToLogin() {
                elements.registerForm.style.display = 'none';
                elements.loginForm.style.display = 'block';
            }
            
            // æ˜¾ç¤ºä¸»ç•Œé¢
            function showMainUI() {
                elements.authContainer.style.display = 'none';
                elements.mainContainer.style.display = 'block';
                
                // æ›´æ–°æ’è¡Œæ¦œ
                updateLeaderboard();
            }
            
            // æ›´æ–°æ’è¡Œæ¦œ
            function updateLeaderboard() {
                // å…¨çƒæ¦œ
                const globalSorted = [...users].sort((a, b) => (b.highScore || 0) - (a.highScore || 0));
                elements.globalLeaderboard.innerHTML = globalSorted.slice(0, 10).map((user, index) => `
                    <tr ${user.username === currentUser?.username ? 'class="me"' : ''}>
                        <td class="rank">${index + 1}</td>
                        <td>${user.username}</td>
                        <td>${user.highScore || 0}</td>
                    </tr>
                `).join('');
                
                // æ—¥æ¦œ (ä»Šæ—¥æœ€é«˜åˆ†)
                const today = new Date().toDateString();
                const dailySorted = users.map(user => {
                    // ç®€å•ç¤ºä¾‹ï¼Œå®é™…åº”ç”¨ä¸­åº”è¯¥æœ‰æ›´è¯¦ç»†çš„æ¸¸æˆè®°å½•
                    return {
                        username: user.username,
                        score: user.lastLogin && new Date(user.lastLogin).toDateString() === today 
                            ? user.highScore || 0 
                            : 0
                    };
                }).sort((a, b) => b.score - a.score);
                
                elements.dailyLeaderboard.innerHTML = dailySorted.slice(0, 10).map((user, index) => `
                    <tr ${user.username === currentUser?.username ? 'class="me"' : ''}>
                        <td class="rank">${index + 1}</td>
                        <td>${user.username}</td>
                        <td>${user.score}</td>
                    </tr>
                `).join('');
                
                // å¥½å‹æ¦œ (ç®€å•ç¤ºä¾‹ï¼Œåªæ˜¾ç¤ºè‡ªå·±å’Œå‰å‡ å)
                elements.friendsLeaderboard.innerHTML = `
                    <tr ${globalSorted[0].username === currentUser?.username ? 'class="me"' : ''}>
                        <td class="rank">1</td>
                        <td>${globalSorted[0].username}</td>
                        <td>${globalSorted[0].highScore || 0}</td>
                    </tr>
                    <tr ${currentUser ? 'class="me"' : ''}>
                        <td class="rank">${globalSorted.findIndex(u => u.username === currentUser?.username) + 1 || '-'}</td>
                        <td>${currentUser?.username || 'ä½ '}</td>
                        <td>${currentUser?.highScore || 0}</td>
                    </tr>
                `;
            }
            
            // æ£€æŸ¥è®°ä½çš„ç™»å½•çŠ¶æ€
            function checkRememberedLogin() {
                const remembered = localStorage.getItem('remembered_user');
                if (remembered) {
                    try {
                        const { username, password } = JSON.parse(remembered);
                        elements.loginUsername.value = username;
                        elements.loginPassword.value = password;
                        elements.rememberMe.checked = true;
                        // è‡ªåŠ¨ç™»å½•
                        login(username, password);
                    } catch (e) {
                        localStorage.removeItem('remembered_user');
                    }
                }
            }
            
            // äº‹ä»¶ç›‘å¬
            elements.switchToRegister.addEventListener('click', switchToRegister);
            elements.switchToLogin.addEventListener('click', switchToLogin);
            
            elements.loginBtn.addEventListener('click', () => {
                const username = elements.loginUsername.value.trim();
                const password = elements.loginPassword.value.trim();
                
                if (!username || !password) {
                    showNotification('è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ', 'error');
                    return;
                }
                
                login(username, password);
            });
            
            elements.registerBtn.addEventListener('click', () => {
                const username = elements.registerUsername.value.trim();
                const password = elements.registerPassword.value.trim();
                const confirmPassword = elements.registerConfirmPassword.value.trim();
                
                if (!username || !password || !confirmPassword) {
                    showNotification('è¯·å¡«å†™æ‰€æœ‰å­—æ®µ', 'error');
                    return;
                }
                
                if (password !== confirmPassword) {
                    showNotification('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´', 'error');
                    return;
                }
                
                register(username, password, confirmPassword);
            });
            
            elements.playBtn.addEventListener('click', () => {
                elements.gameContainer.style.display = 'block';
                elements.shopContainer.style.display = 'none';
                elements.settingsContainer.style.display = 'none';
                elements.leaderboardContainer.style.display = 'none';
                initGame();
            });
            
            elements.shopBtn.addEventListener('click', () => {
                elements.gameContainer.style.display = 'none';
                elements.shopContainer.style.display = 'block';
                elements.settingsContainer.style.display = 'none';
                elements.leaderboardContainer.style.display = 'none';
                updateShop();
            });
            
            elements.settingsBtn.addEventListener('click', () => {
                elements.gameContainer.style.display = 'none';
                elements.shopContainer.style.display = 'none';
                elements.settingsContainer.style.display = 'block';
                elements.leaderboardContainer.style.display = 'none';
            });
            
            elements.leaderboardBtn.addEventListener('click', () => {
                elements.gameContainer.style.display = 'none';
                elements.shopContainer.style.display = 'none';
                elements.settingsContainer.style.display = 'none';
                elements.leaderboardContainer.style.display = 'block';
                updateLeaderboard();
            });
            
            elements.switchAccountBtn.addEventListener('click', () => {
                localStorage.removeItem('remembered_user');
                currentUser = null;
                elements.mainContainer.style.display = 'none';
                elements.authContainer.style.display = 'flex';
                elements.loginForm.style.display = 'block';
                elements.registerForm.style.display = 'none';
                showNotification('å·²é€€å‡ºç™»å½•', 'success');
            });
            
            elements.contactBtn.addEventListener('click', () => {
                window.location.href = 'mailto:3530388417@qq.com?subject=å…³äºç‚¸å¼¹èº²é¿æ¸¸æˆçš„åé¦ˆ';
            });
            
            elements.qqGroupBtn.addEventListener('click', () => {
                window.open('https://qm.qq.com/q/kTAmEkJ8Na', '_blank');
            });
            
            elements.restartBtn.addEventListener('click', () => {
                elements.gameOverContainer.style.display = 'none';
                elements.gameContainer.style.display = 'none';
            });
            
            elements.highScoreRestartBtn.addEventListener('click', () => {
                elements.highScoreContainer.style.display = 'none';
                elements.gameContainer.style.display = 'none';
            });
            
            // é”®ç›˜æ§åˆ¶
            document.addEventListener('keydown', (e) => {
                if (gameState.isPlaying && gameState.controlType === 'keyboard') {
                    gameState.keysPressed[e.key] = true;
                }
            });
            
            document.addEventListener('keyup', (e) => {
                gameState.keysPressed[e.key] = false;
            });
            
            // ç§»åŠ¨ç«¯æ§åˆ¶
            elements.upBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                gameState.keysPressed['ArrowUp'] = true;
            });
            
            elements.upBtn.addEventListener('touchend', (e) => {
                e.preventDefault();
                gameState.keysPressed['ArrowUp'] = false;
            });
            
            elements.downBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                gameState.keysPressed['ArrowDown'] = true;
            });
            
            elements.downBtn.addEventListener('touchend', (e) => {
                e.preventDefault();
                gameState.keysPressed['ArrowDown'] = false;
            });
            
            elements.leftBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                gameState.keysPressed['ArrowLeft'] = true;
            });
            
            elements.leftBtn.addEventListener('touchend', (e) => {
                e.preventDefault();
                gameState.keysPressed['ArrowLeft'] = false;
            });
            
            elements.rightBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                gameState.keysPressed['ArrowRight'] = true;
            });
            
            elements.rightBtn.addEventListener('touchend', (e) => {
                e.preventDefault();
                gameState.keysPressed['ArrowRight'] = false;
            });
            
            // è§¦æ‘¸å±æ§åˆ¶
            elements.gameCanvas.addEventListener('touchstart', (e) => {
                if (gameState.isPlaying && gameState.controlType === 'touch') {
                    e.preventDefault();
                    const touch = e.touches[0];
                    gameState.touchStartX = touch.clientX;
                    gameState.touchStartY = touch.clientY;
                }
            });
            
            elements.gameCanvas.addEventListener('touchmove', (e) => {
                if (gameState.isPlaying && gameState.controlType === 'touch') {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const dx = touch.clientX - gameState.touchStartX;
                    const dy = touch.clientY - gameState.touchStartY;
                    
                    // æ ¹æ®æ»‘åŠ¨æ–¹å‘ç§»åŠ¨ç©å®¶
                    gameState.playerX += dx * 0.1;
                    gameState.playerY += dy * 0.1;
                    
                    // é™åˆ¶è¾¹ç•Œ
                    gameState.playerX = Math.max(0, Math.min(gameState.gameWidth - gameState.playerWidth, gameState.playerX));
                    gameState.playerY = Math.max(0, Math.min(gameState.gameHeight - gameState.playerHeight, gameState.playerY));
                    
                    // æ›´æ–°èµ·å§‹ä½ç½®
                    gameState.touchStartX = touch.clientX;
                    gameState.touchStartY = touch.clientY;
                    
                    // æ›´æ–°ç©å®¶ä½ç½®
                    elements.player.style.left = `${gameState.playerX}px`;
                    elements.player.style.top = `${gameState.playerY}px`;
                }
            });
            
            // å•†åº—æ ‡ç­¾åˆ‡æ¢
            document.querySelectorAll('.tab-container .tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabContainer = tab.parentElement;
                    const contentId = tab.dataset.tab + '-tab';
                    
                    // æ›´æ–°æ´»åŠ¨æ ‡ç­¾
                    tabContainer.querySelectorAll('.tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    tab.classList.add('active');
                    
                    // æ˜¾ç¤ºå¯¹åº”å†…å®¹
                    tabContainer.parentElement.querySelectorAll('.shop-content').forEach(content => {
                        content.style.display = 'none';
                    });
                    document.getElementById(contentId).style.display = 'block';
                });
            });
            
            // æ’è¡Œæ¦œæ ‡ç­¾åˆ‡æ¢
            document.querySelectorAll('.leaderboard-tabs .tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabContainer = tab.parentElement;
                    const contentId = tab.dataset.board + '-board';
                    
                    // æ›´æ–°æ´»åŠ¨æ ‡ç­¾
                    tabContainer.querySelectorAll('.tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    tab.classList.add('active');
                    
                    // æ˜¾ç¤ºå¯¹åº”å†…å®¹
                    tabContainer.parentElement.querySelectorAll('.leaderboard-content').forEach(content => {
                        content.style.display = 'none';
                    });
                    document.getElementById(contentId).style.display = 'block';
                });
            });
            
            // è´­ä¹°VIP
            document.querySelectorAll('.buy-btn[data-item^="vip-"]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const type = btn.dataset.item.split('-')[1];
                    buyVip(type);
                });
            });
            
            // éŸ³é‡æ§åˆ¶
            elements.volumeControl.addEventListener('input', (e) => {
                gameState.volume = e.target.value;
                // å®é™…åº”ç”¨ä¸­è¿™é‡Œå¯ä»¥æ›´æ–°æ¸¸æˆéŸ³æ•ˆéŸ³é‡
            });
            
            // æ›´æ–°æ˜µç§°
            elements.updateNickname.addEventListener('click', () => {
                const newNickname = elements.nicknameChange.value.trim();
                if (newNickname && currentUser) {
                    currentUser.username = newNickname;
                    saveUserData();
                    updateUserUI();
                    showNotification('æ˜µç§°æ›´æ–°æˆåŠŸ', 'success');
                } else {
                    showNotification('è¯·è¾“å…¥æœ‰æ•ˆçš„æ˜µç§°', 'error');
                }
            });
            
            // ä¸Šä¼ å¤´åƒ
            elements.uploadAvatar.addEventListener('click', () => {
                if (!elements.avatarUpload.files || !elements.avatarUpload.files[0]) {
                    showNotification('è¯·é€‰æ‹©å¤´åƒæ–‡ä»¶', 'error');
                    return;
                }
                
                if (gameState.coins < 50) {
                    showNotification('éœ€è¦50é‡‘å¸æ‰èƒ½ä¸Šä¼ è‡ªå®šä¹‰å¤´åƒ', 'error');
                    return;
                }
                
                const file = elements.avatarUpload.files[0];
                const reader = new FileReader();
                
                reader.onload = (e) => {
                    gameState.coins -= 50;
                    currentUser.coins = gameState.coins;
                    
                    // åˆ›å»ºæ–°å¤´åƒé¡¹
                    const avatarId = 'custom-' + Date.now();
                    const newAvatar = {
                        id: avatarId,
                        name: 'è‡ªå®šä¹‰å¤´åƒ',
                        price: 0,
                        owned: true,
                        equipped: true,
                        image: e.target.result
                    };
                    
                    // æ·»åŠ åˆ°ç”¨æˆ·å¤´åƒåˆ—è¡¨
                    if (!currentUser.avatars) currentUser.avatars = [];
                    currentUser.avatars.forEach(a => a.equipped = false);
                    currentUser.avatars.push(newAvatar);
                    
                    // æ›´æ–°UI
                    gameState.playerAvatar = avatarId;
                    elements.userAvatar.src = newAvatar.image;
                    updateUserUI();
                    showNotification('å¤´åƒä¸Šä¼ æˆåŠŸ', 'success');
                    
                    // ä¿å­˜ç”¨æˆ·æ•°æ®
                    saveUserData();
                };
                
                reader.readAsDataURL(file);
            });
            
            // æ§åˆ¶æ–¹å¼åˆ‡æ¢
            elements.controlKeyboard.addEventListener('change', () => {
                if (elements.controlKeyboard.checked) {
                    gameState.controlType = 'keyboard';
                    elements.controls.style.display = 'none';
                }
            });
            
            elements.controlTouch.addEventListener('change', () => {
                if (elements.controlTouch.checked) {
                    gameState.controlType = 'touch';
                    if (gameState.isPlaying) {
                        elements.controls.style.display = 'grid';
                    }
                }
            });
            
            // ç®¡ç†å‘˜æœç´¢
            elements.adminSearchBtn.addEventListener('click', () => {
                const username = elements.adminSearchUser.value.trim();
                if (username) {
                    searchUser(username);
                }
            });
            
            // ç®¡ç†å‘˜æ“ä½œ
            elements.makeAdminBtn.addEventListener('click', () => adminAction('makeAdmin'));
            elements.banUserBtn.addEventListener('click', () => adminAction('ban'));
            elements.addCoinsBtn.addEventListener('click', () => adminAction('addCoins'));
            elements.addKeysBtn.addEventListener('click', () => adminAction('addKeys'));
            elements.grantVipBtn.addEventListener('click', () => adminAction('grantVip'));
            elements.resetPasswordBtn.addEventListener('click', () => adminAction('resetPassword'));
            
            // å®æ—¶å¯¹æˆ˜
            elements.startLiveMatch.addEventListener('click', () => {
                // ç®€å•æ¨¡æ‹ŸåŒ¹é…å¯¹æ‰‹
                const opponents = users.filter(u => u.username !== currentUser?.username);
                if (opponents.length > 0) {
                    const opponent = opponents[Math.floor(Math.random() * opponents.length)];
                    elements.opponentName.textContent = opponent.username;
                    elements.liveMatchInfo.style.display = 'block';
                    elements.startLiveMatch.style.display = 'none';
                    
                    // æ¨¡æ‹Ÿå®æ—¶å¯¹æˆ˜
                    let score = 0;
                    let time = 0;
                    const liveInterval = setInterval(() => {
                        time++;
                        elements.liveTime.textContent = time;
                        
                        // éšæœºå¢åŠ åˆ†æ•°
                        score += Math.floor(Math.random() * 5);
                        elements.liveScore.textContent = score;
                        
                        // éšæœºç»“æŸå¯¹æˆ˜
                        if (Math.random() < 0.05 || time >= 60) {
                            clearInterval(liveInterval);
                            setTimeout(() => {
                                if (Math.random() > 0.5) {
                                    showNotification('ä½ èµ¢äº†!', 'success');
                                } else {
                                    showNotification('ä½ è¾“äº†!', 'error');
                                }
                                elements.liveMatchInfo.style.display = 'none';
                                elements.startLiveMatch.style.display = 'block';
                            }, 1000);
                        }
                    }, 1000);
                } else {
                    showNotification('æ²¡æœ‰æ‰¾åˆ°å¯¹æ‰‹', 'error');
                }
            });
            
            // æ£€æŸ¥è®°ä½çš„ç™»å½•çŠ¶æ€
            checkRememberedLogin();
        });
    </script>
</body>
</html>